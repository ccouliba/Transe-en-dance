# +------------+       +-----------+       +---------------+       +----------+
# | Pong, db.. | ----> | Logstash  | ----> | Elasticsearch | ----> |  Kibana  |
# |  logging   | ----> |  server   | ----> |     finder    | ----> |visualizer|
# +------------+       +-----------+       +---------------+       +----------+

input {
    tcp {
        port    => 5959
        codec   => json
    }
}

output {
    elasticsearch {
        hosts => ["elasticsearch:9200"]
        index => "pong-logs-%{+YYYY.MM.dd}"
        ssl => true
        # ssl_certificate_authorities => '/usr/share/logstash/config/certs/ssl.crt'
        api_key => "${ELASTIC_API_KEY}"
        manage_template => true
        data_stream => true
    }
    stdout { codec => rubydebug }
}
